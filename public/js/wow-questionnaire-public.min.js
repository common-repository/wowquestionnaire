(function(a){'use strict';function b(c){var a=document.cookie.match("(^|;)\\s*"+c+"\\s*=\\s*([^;]+)");return a?a.pop():""}function c(b){var c=1;a(b+" .qContent .step").each(function(){0<a(this).prev(".step").length&&"step-name"!=a(this).prev(".step").data("step")&&c++,"step-name"!=a(this).data("step")&&a(this).data("step","step-"+c)})}function d(d){var h="#wowq-modal-"+d,j=h+" .maonster-form",k=!1,l=j+" .indicatorContainer",m=a(j+" .qContent .step");a.each(m,function(b,c){"step-name"==a(c).data("step")&&(k=!0)});var o=m.length;if(k&&(--o,c(h)),r[d]=[],a(j+" .step").maonsterForm(!0),a(j+" .indicatorContainer").radialIndicator({barColor:"#87CEEB",barWidth:10,initValue:0,roundCorner:!0,percentage:!0}),"gdpr"==a(j+" .qContent .step").first().data("step").split("-")[1])a(h+" .gdprSubmit").unbind("click"),a(h+" .gdprSubmit").on("click",function(c){c.preventDefault();var e=a(this);a(e).prop("disabled",!0),a(e).removeClass("btn-success"),a(e).addClass("disabled btn-default");var g=a(j+" .qContent .step"),i={},k={};a(g).each(function(b,c){i[b]={};var d={},e=a(c).find(".question");a(e).each(function(c,e){var f=a(e).data("type");d[c]={},d[c].type=f,d[c].answer=a(e).find(".maonster-email").val(),i[b].questions={},i[b].questions=d}),k.pages=i});var l=b("cookie_consent"),m=b("cookie_from_eu"),n=b("cookie_critical"),o=b("cookie_performance_and_functionality"),p=b("cookie_analytics_and_customisation"),q=b("cookie_advertising_targeting"),r={ajax_nonce:admin_urls.ajax_nonce,action:"submit_questionnaire",qid:d,data:k,cookies:{cookie_consent:l,cookie_fromeu:m,cookie_critical:n,cookie_performance:o,cookie_analytics:p,cookie_advertising:q},is_gdpr:!0};f(h),jQuery(h).fadeOut("fast",function(){a("body").removeClass("wowq-modal-open"),a("body").find(".wowq-modal-backdrop").hide(),a(h).attr("style","display: none !important")}),a.ajax({url:admin_urls.admin_ajax,type:"post",data:r,dataType:"json",success:function(){},error:function(a){console.log(a)}})});else{if("name"==a(j+" .qContent .step").first().data("step").split("-")[1]?a(h+" .wowq-page-count").text("Info"):a(h+" .wowq-page-count").text("Step 1 of "+o),a(j+" [data-type=\"yesorno\"] label.btn").removeClass("btn-success btn-danger").addClass("btn-default"),a(j+" [data-type=\"yesorno\"] label.btn").on("mouseenter",function(){var b=a(this).find("input[data-type=\"yesorno\"]").val();"yes"==b?a(this).removeClass("btn-default").addClass("btn-success"):"no"==b&&a(this).removeClass("btn-default").addClass("btn-danger")}).on("mouseleave",function(){var b=a(this).find("input[data-type=\"yesorno\"]").val();a(this).hasClass("active")||"yes"!=b?!a(this).hasClass("active")&&"no"==b&&a(this).removeClass("btn-danger").addClass("btn-default"):a(this).removeClass("btn-success").addClass("btn-default")}),a(j+" [data-type=\"yesorno\"] label.btn").on("click",function(){a(this).addClass("active").siblings().removeClass("active btn-success btn-danger btn-default").addClass("btn-default"),a(this).find("input").prop("checked",!0).trigger("change"),a(this).parent().find(".wowqYNVal input").val(a(this).find("input").val()).trigger("change")}),a(j+" .next").unbind("click"),a(j+" .next").on("click",function(b){b.preventDefault();var c=a(this),e=a(c).find("input"),f=o,g=a(c).parent().parent(),i=a(g).data("step").split("-")[1],k=a(g).find(".next"),m={};if(a(c).is("label"))m=a(c).find("input[data-branched=1]");else{var s=a(g).find("[data-branched=1]");0<s.length&&a(s).each(function(b,c){var d=a(c).closest(".question");if("yesorno"==a(d).data("type"))return m=a(d).find(".active input"),!1;if("satisfaction"==a(d).data("type"))return m=a(d).find(".selected input"),!1;if("text"!=a(d).data("type")&&"textarea"!=a(d).data("type")){if("list"==a(d).data("type"))return m=a(c).find("input:checked"),!1;if("dropdown"==a(d).data("type"))return m=a(c).find("option:selected"),!1}else if("equal"==a(c).data("textcondition")){if(a(c).data("textvalue")==a(c).val())return m=a(c),!1;}else if("notequal"==a(c).data("textcondition")){if(a(c).data("textvalue")!=a(c).val())return m=a(c),!1;}else if("contains"==a(c).data("textcondition")){var e=a(c).val(),f=a(c).data("textvalue"),g="\\b("+f+")\\b";if(g=new RegExp(g,"g"),g.test(e))return m=a(c),!1}})}if(!m||a.isEmptyObject(m))var t=a(j+" [data-step=\"step-"+i+"\"]").next();else if(!(m.data("branch")&&""!=m.data("branch")))var t=a(j+" [data-step=\"step-"+i+"\"]").next();else if("final"==m.data("branch"))var t=a(j+" [data-step=\"step-final\"]");else var u=m.data("branch")-1,t=a(g).parent().find(".step").eq(u);var v="";if(0<t.length&&(v=t.data("step").split("-")[1]),"name"==i){if(p[d]="name",!(0<t.length))q[d]="final",a(h+" .wowq-page-count").text("DONE!"),a(l).removeClass("hidden"),n(l,f,o);else if(q[d]=t.data("step").split("-")[1],a(h+" .wowq-page-count").text("Step "+q[d]+" of "+o),a(l).removeClass("hidden"),0<a(j+" [data-step=\"step-"+i+"\"]").prev().length){var w=a(j+" [data-step=\"step-"+i+"\"]").prev().data("step").split("-")[1];n(l,w,o)}}else if("name"==v)p[d]=parseInt(i),q[d]="name",a(h+" .wowq-page-count").text("Info"),a(l).addClass("hidden");else if(i!=f){p[d]=parseInt(i);var x=i;m&&!a.isEmptyObject(m)?m.data("branch")&&""!=m.data("branch")?"final"==m.data("branch")?(q[d]="final",a(h+" .wowq-page-count").text("DONE!"),n(l,f,o)):(q[d]=parseInt(m.data("branch")),x=q[d]-1,q[d]>o&&(--q[d],x=q[d]),a(h+" .wowq-page-count").text("Step "+q[d]+" of "+o),a(l).removeClass("hidden"),n(l,x,o)):(q[d]=parseInt(i)+1,q[d]>o&&(--q[d],x=q[d]),a(h+" .wowq-page-count").text("Step "+q[d]+" of "+o),a(l).removeClass("hidden"),n(l,x,o)):(q[d]=parseInt(i)+1,q[d]>o&&(--q[d],x=q[d]),a(h+" .wowq-page-count").text("Step "+q[d]+" of "+o),a(l).removeClass("hidden"),n(l,x,o))}else if(p[d]=parseInt(i),0<t.length){var x=i;m&&!a.isEmptyObject(m)?m.data("branch")&&""!=m.data("branch")&&("final"==m.data("branch")?(q[d]="final",a(h+" .wowq-page-count").text("DONE!"),n(l,f,o)):(q[d]=parseInt(m.data("branch")),x=q[d]-1,a(h+" .wowq-page-count").text("Step "+q[d]+" of "+o),a(l).removeClass("hidden"),n(l,x,o))):(q[d]=parseInt(i)+1,a(h+" .wowq-page-count").text("Step "+q[d]+" of "+o),a(l).removeClass("hidden"),n(l,x,o))}else q[d]="final",a(h+" .wowq-page-count").text("DONE!"),n(l,f,o);if("final"==q[d])a(g).addClass("hidden").parent().next("[data-step=\"step-final\"]").removeClass("hidden").focus();else if(!m||a.isEmptyObject(m))a(g).addClass("hidden").next().removeClass("hidden").focus();else if(m.data("branch")&&""!=m.data("branch")){var u=m.data("branch")-1;a(g).addClass("hidden"),a(g).parent().find(".step").eq(u).removeClass("hidden").focus()}else a(g).addClass("hidden").next().removeClass("hidden").focus();a(c).is("label")&&(a(c).addClass("active").siblings().removeClass("active"),a(c).find("input").prop("checked",!0).trigger("change")),a(h+" .back").data("step",p[d]),a(h+" .back").hasClass("hidden")&&a(h+" .back").removeClass("hidden"),a(j+" [data-step=\"step-"+i+"\"]").find(".next").prop("disabled",!1),a(j+" [data-step=\"step-"+i+"\"]").find(".next").removeClass("disabled btn-default"),a(k).each(function(){a(this).is("label")?"yes"==a(this).find("input").val()?a(this).hasClass("active")?a(this).removeClass("btn-default").addClass("btn-success"):a(this).removeClass("btn-success").addClass("btn-default"):"no"==a(this).find("input").val()&&(a(this).hasClass("active")?a(this).removeClass("btn-default").addClass("btn-danger"):a(this).removeClass("btn-danger").addClass("btn-default")):a(this).addClass("btn-success")}),r[d].push(p[d])}),a(h+" .back").on("click",function(b){b.preventDefault();var c=r[d].pop(),e=c,f="name"!=e&&"final"!=e?parseInt(e):e,g=j+" [data-step=\"step-"+q[d]+"\"]",i=o,k="",m=a(g).parent().find("[data-step=\"step-"+f+"\"]");"final"==q[d]?a(g).addClass("hidden").prev().find("[data-step=\"step-"+f+"\"]").removeClass("hidden").focus():(a(g).addClass("hidden"),m.removeClass("hidden").focus(),0<m.length&&(k=m.data("step").split("-")[1])),"name"==f?(0<m.length?(p[d]=m.data("step").split("-")[1],p[d]=parseInt(p)):p[d]=0,q[d]=f,a(h+" .wowq-page-count").text("Info"),a(l).addClass("hidden"),0>=a(j+" [data-step=\"step-"+f+"\"]").next().length&&(a(h+" .ac-container").addClass("hidden"),a(h+" .complete-container").removeClass("hidden"))):"name"==k?(0<a(j+" [data-step=\"step-"+k+"\"]").prev().length?(p[d]=a(j+" [data-step=\"step-"+k+"\"]").prev().data("step").split("-")[1],p[d]=parseInt(p[d])):p[d]=0,q[d]=k,a(h+" .wowq-page-count").text("Info"),a(l).addClass("hidden")):((f==i||"final"==q[d])&&(a(h+" .ac-container").addClass("hidden"),a(h+" .complete-container").removeClass("hidden"),a(l).removeClass("hidden")),p[d]=parseInt(f)-1,q[d]=parseInt(f),a(h+" .wowq-page-count").text("Step "+q[d]+" of "+o),a(l).removeClass("hidden"),n(l,p[d],o)),a(this).data("step",p[d]),0==p[d]&&0>=r[d].length&&a(h+" .back").addClass("hidden")}),a(j+" .textarea-count").on("keyup change",function(){var b=a(this).val().length,c=140-b,d=a(this).next("span").find("span.message-count");a(d).html(c),0>=c?a(d).removeClass("text-success").addClass("text-danger"):a(d).removeClass("text-danger").addClass("text-success"),0<b?a(this).addClass("textarea-success"):a(this).removeClass("textarea-success")}),a(h+" .showMyScore").on("click",function(b){b.preventDefault(),a(h+" .ac-container").removeClass("hidden"),a(h+" .complete-container").addClass("hidden"),a(l).addClass("hidden")}),a(h+" .acSubmit").on("click",function(c){c.preventDefault();var e=a(this);a(e).prop("disabled",!0),a(e).removeClass("btn-success"),a(e).addClass("disabled btn-default");var i=a(j+" .qContent .step"),k={},l={},m={},n=0,o=0;a.unique(r[d]);var p=[];a.each(r[d],function(b,c){var d=a(j+" .qContent [data-step=\"step-"+c+"\"]");p.push(d.index())}),a(i).each(function(b,c){k[b]={};var e={},f=a(c).find(".question");a(f).each(function(c,f){var g=a(f).data("type");switch(e[c]={},e[c].type=g,g){case"yesorno":var h=a(f).find(".active input").val();e[c].answer=a(f).find(".active input").val(),e[c].exclude=a(f).find(".active input").data("exclude"),0==t[d][b].questions[c].exclude&&t[d][b].questions[c].score[h]&&(o+=parseInt(t[d][b].questions[c].score[h]),n++);break;case"text":e[c].answer=a(f).find("input[data-type=\"text\"]").val(),e[c].exclude=a(f).find("input[data-type=\"text\"]").data("exclude"),0==t[d][b].questions[c].exclude&&t[d][b].questions[c].score&&(o+=parseInt(t[d][b].questions[c].score),n++);break;case"textarea":e[c].answer=a(f).find("textarea").val(),e[c].exclude=a(f).find("textarea").data("exclude"),0==t[d][b].questions[c].exclude&&t[d][b].questions[c].score&&(o+=parseInt(t[d][b].questions[c].score),n++);break;case"list":var i=a(f).data("multiple");if("yes"==i){var j=a(f).find("input[type=\"checkbox\"]:checked"),l=[];a.each(j,function(b,c){l[b]=a(c).val()}),l.join(","),e[c].answer=l}else e[c].answer=a(f).find("input[type=\"radio\"]:checked").val();e[c].exclude=a(f).data("exclude");var h=e[c].answer;0==t[d][b].questions[c].exclude&&t[d][b].questions[c].options[h].score&&(o+=parseInt(t[d][b].questions[c].options[h].score),n++);break;case"dropdown":var h=a(f).find("select").val();e[c].answer=a(f).find("select").val(),e[c].others=a(f).parent().find(".dropdownOthers input").val(),e[c].exclude=a(f).find("select").data("exclude"),0==t[d][b].questions[c].exclude&&t[d][b].questions[c].options[h].score&&(o+=parseInt(t[d][b].questions[c].options[h].score),n++);break;case"name":e[c].answer={},e[c].answer.fname=a(f).find("input[data-name=\"fname\"]").val(),e[c].answer.lname=a(f).find("input[data-name=\"lname\"]").val();break;case"satisfaction":var h=a(f).find(".active input").val();e[c].answer=a(f).find(".selected input").val(),e[c].exclude=a(f).find(".selected input").data("exclude"),0==t[d][b].questions[c].exclude&&t[d][b].questions[c].score[h]&&(o+=parseInt(t[d][b].questions[c].score[h]),n++);}k[b].questions={},k[b].questions=e}),m.pages=k}),n*=5;var q=Math.floor(100*(o/n));if(""!=a(h+" .ac-container input[type=\"tel\"]").val()){var v=a(h+" .ac-container input[type=\"tel\"]"),w=a(v).intlTelInput("getNumber",intlTelInputUtils.numberFormat.E164),x=a(v).intlTelInput("getNumber",intlTelInputUtils.numberFormat.INTERNATIONAL),y=a(v).intlTelInput("getNumber",intlTelInputUtils.numberFormat.NATIONAL);s=a(h+" .ac-container input[type=\"tel\"]").intlTelInput("getSelectedCountryData"),l.phone={national:y,international:x,complete:w},l.countryCode=s.iso2,l.dialCode=s.dialCode}l.email=a(h+" .ac-container input[type=\"email\"]").val(),l.fname=a(h+" [data-step=\"step-name\"] input[data-name=\"fname\"]").val(),l.lname=a(h+" [data-step=\"step-name\"] input[data-name=\"lname\"]").val(),m.info=l;var z=b("cookie_consent"),A=b("cookie_from_eu"),B=b("cookie_critical"),C=b("cookie_performance_and_functionality"),D=b("cookie_analytics_and_customisation"),E=b("cookie_advertising_targeting"),F={cookie_consent:z,cookie_fromeu:A,cookie_critical:B,cookie_performance:C,cookie_analytics:D,cookie_advertising:E,cookie_optok:a(h+".wowq-optok").is(":checked"),cookie_fbadtok:a(h+".wowq-fbadok").is(":checked")},G={ajax_nonce:admin_urls.ajax_nonce,action:"submit_questionnaire",qid:d,data:m,steps:p,cookies:F};u[d]&&u[d].moreoreq&&q>=u[d].percent?g(l,"more",h,d):u[d]&&u[d].lessthan&&q<u[d].percent?g(l,"less",h,d):f(h),a(h).fadeOut("fast",function(){if(a("body").removeClass("wowq-modal-open"),a("body").find(".wowq-modal-backdrop").hide(),a(h).attr("style","display: none !important"),0<a(h+" .wowqCodePixel").length&&(!A||A&&D)&&"undefined"!=typeof fbq){var b=a(h+" .wowq-fbadok").is(":checked");b&&a("body").prepend(a(h+" .wowqCodePixel").data("fbpixel"))}}),a.ajax({url:admin_urls.admin_ajax,type:"post",data:G,dataType:"json",success:function(){},error:function(a,b){console.log(a),console.log(b)}})}),0<a(h+" .ac-container input[type=\"tel\"]").length){a(h+" .ac-container input[type=\"tel\"]").intlTelInput({initialCountry:"us",separateDialCode:!0,preferredCountries:["us","au","gb"],utilsScript:admin_urls.base_url+"vendor/int-tel-input/js/utils.js",customPlaceholder:function(a){return"type your phone number here. eg. "+a}}),a(h+" .ac-container input[type=\"tel\"]").on("keyup",function(){""==a(this).val()?a(this).removeClass("required"):a(this).addClass("required"),a(j+" .ac-container").maonsterForm()});var v=a(h+" .ac-container input[type=\"tel\"]").css("padding-left").split("px")[0];100<parseInt(v)&&a(h+" .ac-container input[type=\"tel\"]").css("padding-left","75px")}a(j+" [data-type=\"dropdown\"] select").on("change",function(){var b=a(this).val(),c=a(this).parent(),d=a(this).find("option:selected");if(a(d).data("show")){if(0>=a(c).next(".dropdownOthers").length){var e="<div class=\"dropdownOthers form-group text-center wow slideInDown\" data-wow-duration=\"0.4s\">";e+="<input type=\"text\" class=\"form-control required\" placeholder=\"\">",e+="</div>",a(e).insertAfter(c)}else a(c).next(".dropdownOthers").removeClass("fadeOutUp").addClass("fadeInDown animated"),a(c).next(".dropdownOthers").css({"animation-name":"fadeInDown"}),a(c).next(".dropdownOthers").find("input").addClass("required");a(this).closest(".step").maonsterForm(!0)}else 0<a(c).next(".dropdownOthers").length&&(a(c).next(".dropdownOthers").removeClass("fadeInDown").addClass("fadeOutUp animated"),a(c).next(".dropdownOthers").css({"animation-name":"fadeOutUp"}),a(c).next(".dropdownOthers").find("input").removeClass("required"),a(this).closest(".step").maonsterForm(!0))});a(j+" [data-type=\"list\"] label input[type=\"checkbox\"]").on("change",function(b){b.preventDefault();var c=a(this).closest(".question"),d=a(c).find("label input[type=\"checkbox\"]:checked"),e=a(c).find(".multiple-checkbox"),f=[];a.each(d,function(b,c){f[b]=a(c).val()});var g=f.join(",");a(e).val(g).trigger("change")}),a(j+" [data-type=\"satisfaction\"] label.btn").on("click",function(b){b.preventDefault(),a(this).parent().find(".wowqHNSVal input").val(a(this).find("input").val()).trigger("change"),a(this).addClass("selected").siblings().removeClass("selected")}),a(j+" [data-type=\"satisfaction\"] label").on("mouseenter",function(b){b.preventDefault(),a(this).hasClass("happy")?a(this).parent().find(".satisfaction-text h2").text("Satisfied!"):a(this).hasClass("neutral")?a(this).parent().find(".satisfaction-text h2").text("Neutral!"):a(this).hasClass("sad")&&a(this).parent().find(".satisfaction-text h2").text("Dissatisfied!")}),a(j+" [data-type=\"satisfaction\"] label").on("mouseleave",function(b){b.preventDefault();var c=a(this).parent().find("label.selected");0<c.length?a(c).hasClass("happy")?a(this).parent().find(".satisfaction-text h2").text("Satisfied!"):a(c).hasClass("neutral")?a(this).parent().find(".satisfaction-text h2").text("Neutral!"):a(c).hasClass("sad")&&a(this).parent().find(".satisfaction-text h2").text("Dissatisfied!"):a(this).parent().find(".satisfaction-text h2").html("&nbsp;")})}}function f(b){swal({html:a(b).find(".wowq-thankyou").html(),type:"success",showCancelButton:!1,showConfirmButton:!1}).then(function(){location.reload()},function(){location.reload()})}function g(b,c,d,e){swal({title:"Please wait...",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}),swal.showLoading();var g={ajax_nonce:admin_urls.ajax_nonce,action:"get_wowq_woocommerce_products",qid:e,woocommerce:u[e],method:c};a.ajax({url:admin_urls.admin_ajax,type:"post",data:g,cache:!1,dataType:"json",success:function(g){if(g.status){var i=b.fname&&""!=b.fname?b.fname:"",j=b.lname&&""!=b.lname?b.lname:"",k=b.email&&""!=b.email?b.email:"",l=b.phone&&""!=b.phone?b.phone:"",m="",n="",o="",p=0,q=0;"more"==c?(m=g.woocommerce.productMore.name,n=g.woocommerce.productMore.description,o=g.woocommerce.productMore.images[0],p=g.woocommerce.productMore.price,q=g.woocommerce.productMore.id):(m=g.woocommerce.productLess.name,n=g.woocommerce.productLess.description,o=g.woocommerce.productLess.images[0],p=g.woocommerce.productLess.price,q=g.woocommerce.productLess.id),swal({html:"<div id=\"wowq-woocommerce-popup\"></div>",allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!1,buttonsStyling:!1,showCloseButton:!0,showCancelButton:!1,showConfirmButton:!1,width:600,heightAuto:!0,customClass:"bootstrap-wowq"}).then(function(){},function(){a(d).find(".wowq-thankyou .wooSaleAlert").removeClass("hidden").hide(),f(d)}),a("#wowq-woocommerce-popup").html(g.html),a(d).find(".wowq-thankyou .wooSaleAlert").removeClass("hidden"),a("#wowq-woocommerce-popup #wowq-woocommerce-product-"+c).removeClass("hidden"),a("#wowq-woocommerce-popup #wowq-woocommerce-product-"+c+"-finish").removeClass("hidden");var r=""==i?""==k?"Hey":k:i;a("#wowq-woocommerce-popup #wowq-woocommerce-product-"+c).find(".wowq-woocommerce-fname").html(r),a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][fname]\"]").val(i),a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][lname]\"]").val(j),a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][email]\"]").val(k),a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][phone]\"]").val(l.complete),a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("input[name=\"qWoo[shipping][fname]\"]").val(i),a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("input[name=\"qWoo[shipping][lname]\"]").val(j),a("#wowq-woocommerce-popup .wowq-woocommerce-buy").each(function(){a(this).on("click",function(){a("#wowq-woocommerce-popup #wowq-woocommerce-billing").removeClass("hidden"),a(this).parent().addClass("hidden"),h(g.woocommerce,d,e,q)})})}else a(d).find(".wowq-thankyou .wooSaleAlert").hide(),f(d)},error:function(a,b){console.log(a),console.log(b)}})}function h(b,c,d,f){a("#wowq-woocommerce-popup #wowq-woocommerce-billing input[type=\"tel\"]").intlTelInput({initialCountry:"us",separateDialCode:!0,preferredCountries:["us","au","gb"],utilsScript:admin_urls.base_url+"vendor/int-tel-input/js/utils.js",customPlaceholder:function(a){return"type your phone number here. eg. "+a}}),a("#wowq-woocommerce-popup .intl-tel-input").css("width","100%"),a("#wowq-woocommerce-popup #wowq-woo-billing-form").maonsterForm(),a("#wowq-woocommerce-popup #wowq-woo-billing-form input[type=\"checkbox\"]").on("change",function(){var b=a(this).is(":checked");b?(a("#wowq-woocommerce-popup #wowq-woo-shipping").removeClass("hidden"),a("#wowq-woocommerce-popup #wowq-woo-shipping .form-control").each(function(){a(this).addClass("required")})):(a("#wowq-woocommerce-popup #wowq-woo-shipping").addClass("hidden"),a("#wowq-woocommerce-popup #wowq-woo-shipping .form-control").each(function(){a(this).removeClass("required")})),a("#wowq-woocommerce-popup #wowq-woo-billing-form").maonsterForm()}),a("#wowq-woocommerce-popup #wowq-woo-billing-form select.wooCountryBilling").on("change",function(){var c=a(this).val(),d=a("#wowq-woocommerce-popup #wowq-woo-billing-form select.wooStateBilling");a(d).removeClass("required"),a(d).parent().removeClass("has-error has-success");var e="<option value=\"\" >CHOOSE STATE</option>";a.each(b.wooCountries,function(b,f){f.code==c&&""!=f.states&&0<f.states.length&&(a.each(f.states,function(a,b){e+="<option value=\""+b.code+"\"> "+b.name+"</option>"}),a(d).addClass("required"))}),a(d).html(e),a("#wowq-woocommerce-popup #wowq-woo-billing-form").maonsterForm()}),a("#wowq-woocommerce-popup #wowq-woo-billing-form select.wooCountryShipping").on("change",function(){var c=a(this).val(),d=a("#wowq-woocommerce-popup #wowq-woo-billing-form select.wooStateShipping");a(d).removeClass("required"),a(d).parent().removeClass("has-error has-success");var e="<option value=\"\" >CHOOSE STATE</option>";a.each(b.wooCountries,function(b,f){f.code==c&&""!=f.states&&0<f.states.length&&(a.each(f.states,function(a,b){e+="<option value=\""+b.code+"\"> "+b.name+"</option>"}),a(d).addClass("required"))}),a(d).html(e),a("#wowq-woocommerce-popup #wowq-woo-billing-form").maonsterForm()}),a("#wowq-woocommerce-popup #wowq-woocommerce-finish").on("click",function(b){b.preventDefault();var e=a(this);a(e).addClass("hidden"),a(e).text("Please wait..."),a(e).prop("disabled",!0),a("#wowq-woocommerce-popup #wowq-order-progress").removeClass("hidden"),a("#wowq-woocommerce-popup #wowq-woo-billing-form .form-control").prop("disabled",!0);var g={fname:a.trim(a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][fname]\"]").val()),lname:a.trim(a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][lname]\"]").val()),email:a.trim(a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][email]\"]").val()),phone:a("#wowq-woocommerce-popup #wowq-woo-billing-form input[name=\"qWoo[billing][phone]\"]").intlTelInput("getNumber",intlTelInputUtils.numberFormat.E164),address:a.trim(a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][address]\"]").val()),country:a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("select[name=\"qWoo[billing][country]\"]").val(),state:a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("select[name=\"qWoo[billing][state]\"]").val(),city:a.trim(a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][city]\"]").val()),postcode:a.trim(a("#wowq-woocommerce-popup #wowq-woo-billing-form").find("input[name=\"qWoo[billing][postcode]\"]").val())};if(a("#wowq-woocommerce-popup #wowq-woo-billing-form input[type=\"checkbox\"]").is(":checked"))var h={fname:a.trim(a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("input[name=\"qWoo[shipping][fname]\"]").val()),lname:a.trim(a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("input[name=\"qWoo[shipping][lname]\"]").val()),address:a.trim(a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("input[name=\"qWoo[shipping][address]\"]").val()),country:a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("select[name=\"qWoo[shipping][country]\"]").val(),state:a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("select[name=\"qWoo[shipping][state]\"]").val(),city:a.trim(a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("input[name=\"qWoo[shipping][city]\"]").val()),postcode:a.trim(a("#wowq-woocommerce-popup #wowq-woo-shipping-form").find("input[name=\"qWoo[shipping][postcode]\"]").val())};else var h={fname:g.fname,lname:g.lname,address:g.address,country:g.country,state:g.state,city:g.city,postcode:g.postcode};var j={billing:g,shipping:h,product:{id:f},zone:u[d].shipping};i(j,c)})}function i(b,c){var d={ajax_nonce:admin_urls.ajax_nonce,action:"wowq_woo_create_order",data:b};a.ajax({xhr:function(){var b=new window.XMLHttpRequest;return b.upload.addEventListener("progress",function(b){if(b.lengthComputable){var c=b.loaded/b.total,d=100*c;100<=d&&(d-=2);var e=d+"%";a("#wowq-woocommerce-popup #wowq-order-progress .progress-bar").css({width:e}),a("#wowq-woocommerce-popup #wowq-order-progress .progress-text").text(e)}},!1),b.addEventListener("progress",function(a){if(a.lengthComputable)a.loaded/a.total},!1),b},url:admin_urls.admin_ajax,type:"post",data:d,dataType:"json",success:function(b){a("#wowq-woocommerce-popup #wowq-order-progress .progress-bar").css({width:"100%"}),a("#wowq-woocommerce-popup #wowq-order-progress .progress-text").text("100%"),setTimeout(function(){a("#wowq-woocommerce-popup #wowq-order-progress").addClass("hidden"),a("#wowq-woocommerce-popup #wowq-woocommerce-finish").removeClass("hidden"),b.status&&("stripe"==b.payment.method?j(b,c):"square_credit_card"==b.payment.method&&l(b,c))},1e3)},error:function(a,b){console.log(a),console.log(b)}})}function j(b,c){a("#wowq-woocommerce-popup #wowq-woo-billing-form .form-control").prop("disabled",!1),a("#wowq-woocommerce-popup #wowq-woocommerce-finish").text("FINISH"),a("#wowq-woocommerce-popup #wowq-woocommerce-finish").prop("dsiabled",!1),a("#wowq-woocommerce-popup #wowq-woocommerce-billing").addClass("hidden");var d=Stripe(b.payment.pubkey),e="<form id=\"wowq-woo-stripe-form\" class=\"form-horizontal\">";e+="<div class=\"form-group\">",e+="<div class=\"col-sm-12\">",e+="<input type=\"hidden\" class=\"wowq-woo-stripetoken\" value=\"\" />",e+="<div id=\"wowq-woo-stripe-card\" class=\"input\"></div>",e+="</div></div>",e+="<div class=\"form-group\">",e+="<div class=\"col-sm-12\">",e+="<button id=\"wowq-woo-stripe-submit\" type=\"submit\" class=\"btn btn-lg btn-block btn-success button-credit-card\">Pay "+b.payment.order.currency+" "+b.payment.order.total+"</button>",e+="</div></div>",e+="<div class=\"form-group\">",e+="<div class=\"col-sm-offset-9 col-sm-3\">",e+="<img src=\""+admin_urls.base_url+"images/powered_by_stripe.png\" class=\"img-responsive center-block\" />",e+="</div></div>",e+="</form>",a("#wowq-woocommerce-popup #wowq-woo-payment").html(e),a("#wowq-woocommerce-popup #wowq-woo-payment").removeClass("hidden"),setInterval(function(){"auto"!=a(".swal2-modal.bootstrap-wowq").css("min-height")&&a(".swal2-modal.bootstrap-wowq").css("min-height","auto")},100);var f=d.elements({locale:window.__exampleLocale}),g=f.create("card",{iconStyle:"solid",style:{base:{iconColor:"#000",color:"#000",fontWeight:400,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:"16px",fontSmoothing:"antialiased"},invalid:{}},hidePostalCode:!0});g.mount("#wowq-woo-stripe-card");var h=d.paymentRequest({country:b.payment.order.billing.country,currency:b.payment.order.currency.toLowerCase(),total:{amount:100*parseInt(b.payment.order.total),label:"Total"}});h.on("token",function(a){var b=document.querySelector("#wowq-woo-stripe-card");b.classList.add("submitted"),a.complete("success")}),function(f){function g(){Array.prototype.forEach.call(j.querySelectorAll("input[type='text'], input[type='email'], input[type='tel']"),function(a){a.removeAttribute("disabled")})}function h(){Array.prototype.forEach.call(j.querySelectorAll("input[type='text'], input[type='email'], input[type='tel']"),function(a){a.setAttribute("disabled","true")})}function i(){var a=document.createElement("input");a.type="submit",a.style.display="none",j.appendChild(a),a.click(),a.remove()}var j=document.querySelector("#wowq-woo-stripe-form"),l=document.querySelector("#wowq-woo-stripe-card"),m={};f.forEach(function(b,c){b.on("change",function(b){if(b.error)m[c]=b.error.message,a("#wowq-woo-stripe-card").find("button[type=\"submit\"]").removeClass("btn-success").addClass("btn-default").prop("disabled",!0);else{m[c]=null;var d=Object.keys(m).sort().reduce(function(a,b){return a||m[b]},null);d?a("#wowq-woo-stripe-card").find("button[type=\"submit\"]").removeClass("btn-success").addClass("btn-default").prop("disabled",!0):a("#wowq-woo-stripe-card").find("button[type=\"submit\"]").removeClass("btn-default").addClass("btn-success").prop("disabled",!1)}})}),j.addEventListener("submit",function(m){m.preventDefault(),a("#wowq-woo-stripe-submit").prop("disabled",!0);var e=!0;if(Array.prototype.forEach.call(j.querySelectorAll("input"),function(a){if(a.checkValidity&&!a.checkValidity())return void(e=!1)}),!e)return void i();h();var n=b.payment.order.billing.first_name,o=b.payment.order.billing.last_name,p=b.payment.order.billing.address_1,q=b.payment.order.billing.city,r=b.payment.order.billing.state,s=b.payment.order.billing.postcode,t=b.payment.order.billing.country,u={name:n+" "+o,address_line1:p?p:void 0,address_city:q?q:void 0,address_state:""==r?void 0:r,address_zip:""==s?void 0:s,address_country:t?t:void 0};d.createToken(f[0],u).then(function(a){if(a.token){l.classList.add("submitted");var d={};d.token=a.token,d.woocommerce=b,k(d,c)}else g()})})}([g],"wowq-woo-stripe-card")}function k(b,c){var d={ajax_nonce:admin_urls.ajax_nonce,action:"wowq_woo_payment",data:b};a.ajax({url:admin_urls.admin_ajax,type:"post",data:d,dataType:"json",success:function(){f(c)},error:function(b,c){console.log(b),console.log(c),a("#wowq-woo-stripe-submit").prop("disabled",!1)}})}function l(b,c){a("#wowq-woocommerce-popup #wowq-woo-billing-form .form-control").prop("disabled",!1),a("#wowq-woocommerce-popup #wowq-woocommerce-finish").text("FINISH"),a("#wowq-woocommerce-popup #wowq-woocommerce-finish").prop("dsiabled",!1),a("#wowq-woocommerce-popup #wowq-woocommerce-billing").addClass("hidden");var d=new SqPaymentForm({applicationId:b.payment.appid,inputClass:"sq-input",autoBuild:!1,inputStyles:[{fontSize:"16px",lineHeight:"24px",padding:"16px",placeholderColor:"#a0a0a0",backgroundColor:"transparent"}],cardNumber:{elementId:"sq-card-number",placeholder:"CARD NUMBER"},cvv:{elementId:"sq-cvv",placeholder:"CVV"},expirationDate:{elementId:"sq-expiration-date",placeholder:"MM/YY"},postalCode:{elementId:"sq-postal-code",placeholder:"ZIP"},callbacks:{cardNonceResponseReceived:function(d,e){if(d){var f="";return d.forEach(function(a){console.error("  "+a.message),f+="  "+a.message+"<br/>"}),a("#wowq-woo-square-form .alert").removeClass("hidden").addClass("alert-danger"),a("#wowq-woo-square-form .alert").html("Encountered errors, "+f),void a("#wowq-woo-square-submit").prop("disabled",!1)}a("#wowq-woo-square-form .alert").removeClass("alert-danger").addClass("hidden");var g={};g.nonce=e,g.woocommerce=b,m(g,c)}}});d.build();var e="<form id=\"wowq-woo-square-form\" class=\"form-horizontal\">";e+="<div class=\"alert hidden\">",e+="</div>",e+="<div class=\"form-group\">",e+="<div class=\"col-sm-12\">",e+="<div id=\"sq-card-number\"></div>",e+="<div class=\"third\" id=\"sq-expiration-date\"></div>",e+="<div class=\"third\" id=\"sq-cvv\"></div>",e+="<div class=\"third\" id=\"sq-postal-code\"></div>",e+="</div></div>",e+="<div class=\"form-group\">",e+="<div class=\"col-sm-12\">",e+="<button id=\"wowq-woo-square-submit\" type=\"submit\" class=\"btn btn-lg btn-block btn-success button-credit-card\">Pay "+b.payment.order.currency+" "+b.payment.order.total+"</button>",e+="</div></div>",e+="<div class=\"form-group\">",e+="<div class=\"col-sm-offset-9 col-sm-3\">",e+="<img src=\""+admin_urls.base_url+"images/powered_by_square.png\" class=\"img-responsive center-block\" />",e+="</div></div>",e+="</form>",a("#wowq-woocommerce-popup #wowq-woo-payment").html(e),a("#wowq-woocommerce-popup #wowq-woo-payment").removeClass("hidden"),setInterval(function(){"auto"!=a(".swal2-modal.bootstrap-wowq").css("min-height")&&a(".swal2-modal.bootstrap-wowq").css("min-height","auto")},100),a("#wowq-woo-square-submit").on("click",function(b){b.preventDefault(),a(this).prop("disabled",!0),d.requestCardNonce()})}function m(b,c){var d={ajax_nonce:admin_urls.ajax_nonce,action:"wowq_woo_payment",data:b};a.ajax({url:admin_urls.admin_ajax,type:"post",data:d,dataType:"json",success:function(b){b.status&&b.payment.success?f(c):(a("#wowq-woo-square-form .alert").removeClass("hidden").addClass("alert-danger"),a("#wowq-woo-square-form .alert").html("Encountered errors, "+b.payment.msg.errors[0].detail),a("#wowq-woo-square-submit").prop("disabled",!1))},error:function(b,c){console.log(b),console.log(c),a("#wowq-woo-square-submit").prop("disabled",!1)}})}function n(b,c,d){var e=Math.floor(100*(c/d)),f=a(b).data("radialIndicator");f.animate(e)}if(window.dataLayer){var o=b("cookie_consent")}document.addEventListener("gesturestart",function(a){a.preventDefault()});var p={},q={},r={},s="",t={},u={};if(0<a(".wowqStart").length){var v=a(".wowqStart");a(v).each(function(){var b=a(this),c=a("#wowq-modal-"+a(b).data("qid"));0<a(c).find(".wowq-floating-bar-footer").length&&a(c).find(".wowq-floating-bar-footer").each(function(){var b=a(this);a(b).appendTo("body");var c=a(b).data("docked");c?a(b).show():a(window).scroll(function(){var c=a(b).data("offset"),d=a(window).scrollTop(),e=a(document).height(),f=a(window).height(),g=Math.round(100*(d/(e-f)));g>=c?a(b).fadeIn():a(b).fadeOut()})}),d(a(b).data("qid")),a(b).on("click",function(){var b=a(this),d=a(b).data("qid"),e=a(b).data("loading");swal({title:e,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}),swal.showLoading();var f={ajax_nonce:admin_urls.ajax_nonce,action:"get_wowq_woocommerce_data",qid:d};a.ajax({url:admin_urls.admin_ajax,type:"post",data:f,cache:!1,dataType:"json",success:function(a){t[d]=a["wowqData_"+d],u[d]=a["wowqWoocommerce_"+d]},error:function(a,b){console.log(a),console.log(b)}}),a("body").removeClass("wowq-modal-open").addClass("wowq-modal-open"),0>=a("body").find(".wowq-modal-backdrop").length?a("body").append("<div class=\"wowq-modal-backdrop fade in\"></div>"):a("body").find(".wowq-modal-backdrop").show(),a("body").append(a(c)),a(c).addClass("in"),jQuery(c).fadeIn("fast",function(){a(c).attr("style","display: block !important"),swal.close()}),a(c).find(".wowq-modal-header .close").on("click",function(){jQuery(c).fadeOut("fast",function(){a("body").removeClass("wowq-modal-open"),a("body").find(".wowq-modal-backdrop").hide(),a(c).attr("style","display: none !important")})})})})}})(jQuery);